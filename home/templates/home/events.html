{% extends "home/base.html" %}
{% load staticfiles %}
{% block title %}Upcoming Events{% endblock %}
{% block css %}
  <link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.css" rel="stylesheet" />
  <link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.print.css" rel="stylesheet" />
{% endblock %}
{% block js %}
  <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.min.js"></script>
{% endblock %}

{% block body %}
<div class="grid_12 featurebar left">
<h1>Upcoming Events</h1>
	{% for item in calendar_items %}
		<div class="grid_4 {% if forloop.first %}alpha{% endif %}{% if forloop.last %}omega{% endif %}">
			<p><h3><a href="{{ item.url }}">{{ item.name }}</a></h3></p>
			<p><b>When:</b> {{ item.time|date:"l, F j \a\t h:i A" }}</p>
			<p><b>Where:</b> {{ item.location }}</p>
			<p><b>What:</b> {{ item.description|truncatewords:10 }} <a href="{{ item.url }}">Read more</a></p>
		</div>
	{% endfor %}
	<div id='calendar' style='height:auto;'></div>
</div>


<script type="text/javascript">
$(document).ready(function() {
    $('#calendar').fullCalendar({
        events: "{% url 'events_json' %}"
    })
});
</script>
{% endblock %}